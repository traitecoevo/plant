---
title: "test_speed_FF16_FF16w"
author: "Isaac Towers"
date: "2022-08-05"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
devtools::load_all(".")
```


```{r}
p0 <- scm_base_parameters("FF16w")
traits =  trait_matrix(c(0.001), c("epsilon_leaf"))
p0$max_patch_lifetime <- 0.1

p1 <- expand_parameters(traits, p0, mutant=FALSE, birth_rate_list = c(1))
env <- make_environment("FF16w", soil_initial_state = rep(0.5, 1), rainfall = 1)

# ctrl = scm_base_control()
# ctrl$schedule_eps <- 0.1

# 123.90 s
system.time(result <- build_schedule(p1, env))

# 50.51 s
system.time(result_scm <- run_scm_collect(result, env))
```


```{r}
p0 <- scm_base_parameters("FF16w")
traits =  trait_matrix(c(0.0001), c("epsilon_leaf"))
p0$max_patch_lifetime <- 0.1

p1 <- expand_parameters(traits, p0, mutant=FALSE, birth_rate_list = c(1))
env <- make_environment("FF16w", soil_initial_state = rep(0.5, 1), rainfall = 1)

ctrl = scm_base_control()
# ctrl$schedule_eps <- 0.1

# 6.23s
system.time(result2 <- build_schedule(p1, env))

# 3.16s
system.time(result_scm2 <- run_scm_collect(p1, env))
```
